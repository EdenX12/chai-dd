<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cc.mrbird.febs.api.mapper.SOfferPriceMapper">

        <!-- 通用查询映射结果 -->
        <resultMap id="BaseResultMap" type="cc.mrbird.febs.api.entity.SOfferPrice">
                <result column="id" property="id" />

                    <result column="amount" property="amount" />
                    <result column="status" property="status" />
                    <result column="task_order_id" property="taskOrderId" />
                    <result column="user_id" property="userId" />
                    <result column="pay_status" property="payStatus" />
                    <result column="pay_id" property="payId" />
            <result column="create_time" property="createTime" />
            <result column="update_time" property="updateTime" />
        </resultMap>

        <!-- 通用查询结果列 -->
        <sql id="Base_Column_List">
                id,
            create_time, amount, status, task_order_id, user_id, pay_status, pay_id
        </sql>


    <select id="findOfferPriceList" resultType="sOfferPrice" parameterType="sOfferPrice">

        SELECT
        u.user_name userName,
        u.nick_name nickName,
        u.user_phone userPhone,
        o.amount amount,
        (CASE WHEN o.status = 1 THEN '领先' WHEN o.status = 2 THEN '出局' END) status
        FROM s_offer_price o
        LEFT JOIN s_user u ON o.user_id = u.id
        WHERE o.pay_status = 1
          AND o.task_order_id = #{sOfferPrice.taskOrderId}
        ORDER BY o.create_time desc

    </select>


</mapper>
